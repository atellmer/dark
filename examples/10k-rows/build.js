(()=>{"use strict";const e=!1,t="dark:idx",n="type",o="key",r="ref",s="flag";var i,l;!function(e){e[e.ANIMATION=3]="ANIMATION",e[e.HIGH=2]="HIGH",e[e.NORMAL=1]="NORMAL",e[e.LOW=0]="LOW"}(i||(i={})),function(e){e.HAS_NO_MOVES="HAS_NO_MOVES"}(l||(l={}));const a=e=>"function"==typeof e,c=e=>void 0===e,u=e=>"number"==typeof e,f=e=>"string"==typeof e,d=e=>"object"==typeof e,p=e=>"boolean"==typeof e,h=e=>Array.isArray(e),m=e=>null===e,g=e=>m(e)||c(e),E=e=>m(e)||c(e)||!1===e,v=()=>Date.now(),b=()=>{};function y(...e){!c(console)&&console.error(...e)}function k(e){const t=[],n={0:{idx:0,source:e}};let o=0;do{const{source:e,idx:r}=n[o],s=e[r];r>=e.length?(o--,n[o]||(n[o]={idx:0,source:[]}),n[o].idx++):h(s)?(o++,n[o]={idx:0,source:s}):(t.push(s),n[o].idx++)}while(o>0||n[o].idx<n[o].source.length);return t}function T(e,t,n=!1){return e.reduce(((e,o)=>(e[t(o)]=!n||o,e)),{})}function w(e,t){if(e&&t&&e.length>0&&t.length>0)for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}const C=Symbol("component");class x{type;token;props;ref;displayName;children=[];shouldUpdate;constructor(e,t,n,o,r,s){this.type=e||null,this.token=t||C,this.props=n||null,this.ref=o||null,this.shouldUpdate=r||null,this.displayName=s||""}}function H(t,n={}){const{token:o,displayName:r,shouldUpdate:s,keepRef:i=!1}=n;return(n={},l)=>(!i&&n.ref&&(delete n.ref,e&&y("[Dark]: To use ref you need to wrap the component with forwardRef!")),new x(t,o,n,l,s,r))}const M=e=>e instanceof x,S=e=>g(e.props[o])?null:e.props[o],I=e=>e.props[s]||null;var A;!function(e){e.TAG="TAG",e.TEXT="TEXT",e.COMMENT="COMMENT"}(A||(A={}));const $=Symbol("virtual-node");class N{type=null;constructor(e){this.type=e}}class P extends N{name=null;attrs={};children=[];constructor(e,t,n){super(A.TAG),this.name=e||this.name,this.attrs=t||this.attrs,this.children=n||this.children}}class D extends N{value="";constructor(e){super(A.TEXT),this.value=e}}class O extends N{value="";constructor(e){super(A.COMMENT),this.value=e}}const L=e=>e instanceof N,R=e=>e instanceof P,F=e=>e instanceof D,U=e=>a(e)&&!0===e[$],W=e=>g(e.attrs[o])?null:e.attrs[o],B=e=>e.attrs[s]||null,j=e=>g(e[o])?null:e[o],G=e=>e[s]||null,K=()=>new O("dark:matter"),Z=e=>F(e)||(e=>e instanceof O)(e);function q(e){return new D(e+"")}q.from=e=>F(e)?e.value:e+"";const V=Symbol("memo"),_=(e,t)=>{const n=Object.keys(t);for(const o of n)if("slot"!==o&&t[o]!==e[o])return!0;return!1},z=e=>M(e)&&e.token===V;function X(e,t=_){return H(e,{token:V,keepRef:!0,shouldUpdate:t})}let Y=null;const J=new Map;class Q{wipRoot=null;currentRoot=null;nextUnitOfWork=null;events=new Map;unsubscribers=[];candidates=new Set;deletions=new Set;fiberMount={level:0,navigation:{},isDeepWalking:!0};componentFiber=null;effects=[];layoutEffects=[];insertionEffects=[];isLayoutEffectsZone=!1;isInserionEffectsZone=!1;isUpdateHookZone=!1;isBatchZone=!1;isHydrateZone=!1;isHot=!1;lazy=new Set}const ee={set:e=>{Y=e,!J.get(Y)&&J.set(Y,new Q)},remove:e=>J.delete(e)},te=()=>Y,ne=(e=Y)=>J.get(e),oe={get:()=>ne()?.wipRoot||null,set:e=>ne().wipRoot=e},re={get:e=>ne(e)?.currentRoot||null,set:e=>ne().currentRoot=e},se={get:()=>ne()?.nextUnitOfWork||null,set:e=>ne().nextUnitOfWork=e},ie={get:()=>ne()?.componentFiber,set:e=>ne().componentFiber=e},le={get:()=>ne().events,addUnsubscriber:e=>ne().unsubscribers.push(e),unsubscribe:e=>ne(e).unsubscribers.forEach((e=>e()))},ae={get:()=>ne().candidates,add:e=>ne().candidates.add(e),reset:()=>ne().candidates=new Set},ce={get:()=>ne().deletions,add:e=>ne().deletions.add(e),has:e=>ne().deletions.has(e),set:e=>ne().deletions=e,reset:()=>ne().deletions=new Set},ue={reset:()=>{ne().fiberMount={level:0,navigation:{},isDeepWalking:!0}},getIndex:()=>{const{fiberMount:e}=ne();return e.navigation[e.level]},jumpToChild:()=>{const{fiberMount:e}=ne();e.level=e.level+1,e.navigation[e.level]=0},jumpToParent:()=>{const{fiberMount:e}=ne();e.navigation[e.level]=0,e.level=e.level-1},jumpToSibling:()=>{const{fiberMount:e}=ne();e.navigation[e.level]=e.navigation[e.level]+1},deepWalking:{get:()=>ne().fiberMount.isDeepWalking,set:e=>ne().fiberMount.isDeepWalking=e}},fe={get:()=>ne().effects,reset:()=>ne().effects=[],add:e=>ne().effects.push(e)},de={get:()=>ne().layoutEffects,reset:()=>ne().layoutEffects=[],add:e=>ne().layoutEffects.push(e)},pe={get:()=>ne().insertionEffects,reset:()=>ne().insertionEffects=[],add:e=>ne().insertionEffects.push(e)},he={get:()=>ne()?.isLayoutEffectsZone||!1,set:e=>ne().isLayoutEffectsZone=e},me={get:e=>ne(e)?.isInserionEffectsZone||!1,set:e=>ne().isInserionEffectsZone=e},ge={get:()=>ne()?.isUpdateHookZone||!1,set:e=>ne().isUpdateHookZone=e},Ee={get:()=>ne()?.isBatchZone||!1,set:e=>ne().isBatchZone=e},ve={get:()=>ne()?.isHydrateZone||!1,set:e=>ne().isHydrateZone=e},be={get:()=>ne()?.isHot||!1,set:e=>ne().isHot=e},ye=()=>ne().lazy.size>0,ke=Symbol("use-effect"),{useEffect:Te,hasEffects:we,dropEffects:Ce}=xe(ke,fe);function xe(e,t){return{useEffect:function(n,o){const r=ie.get().hook,{idx:s,values:i}=r,l=()=>{i[s]={deps:o,token:e,value:void 0},t.add((()=>{i[s].value=n()}))};if(c(i[s]))l();else{const{deps:e,value:t}=i[s];(!o||w(o,e))&&(a(t)&&t(),l())}r.idx++},hasEffects:function(t){const{values:n}=t.hook;return n.some((t=>t?.token===e))},dropEffects:function(t){const{values:n}=t;for(const t of n)if(t.token===e){const e=t.value;a(e)&&e()}}}}const He=Symbol("fragment"),Me=H((({slot:e})=>e||null),{token:He}),Se=e=>M(e)&&e.token===He,Ie=H((({slot:e})=>e),{token:V});function Ae(e){return U(e)||M(e)}function $e(e,t=!1){return function(e,t){if(h(e)?Ae(e[0]):Ae(e)){const n=Ie({slot:Me({slot:e})});return n.shouldUpdate=()=>t,n}return e}(e(),t)}function Ne(e,t){const n=ie.get(),{hook:o}=n,{idx:r,values:s}=o;if(c(s[r])){const n=$e(e);return s[r]={deps:t,value:n},o.idx++,n}const i=s[r],l=w(t,i.deps),a=l?e:()=>i.value;return i.deps=t,i.value=$e(a,l),o.idx++,i.value}const Pe={createNativeElement:()=>{throw new Error(De("createNativeElement"))},requestAnimationFrame:()=>{throw new Error(De("requestAnimationFrame"))},cancelAnimationFrame:()=>{throw new Error(De("cancelAnimationFrame"))},scheduleCallback:()=>{throw new Error(De("scheduleCallback"))},shouldYeildToHost:()=>{throw new Error(De("shouldYeildToHost"))},applyCommit:()=>{throw new Error(De("applyCommit"))},finishCommitWork:()=>{throw new Error(De("finishCommitWork"))},detectIsDynamic:()=>{throw new Error(De("detectIsDynamic"))},detectIsPortal:()=>{throw new Error(De("detectIsPortal"))},unmountPortal:()=>{throw new Error(De("unmountPortal"))},restart:()=>{throw new Error(De("restart"))}},De=e=>`${e} not installed by renderer`;var Oe;!function(e){e.CREATE="CREATE",e.UPDATE="UPDATE",e.DELETE="DELETE",e.SKIP="SKIP"}(Oe||(Oe={}));const Le=Symbol("use-layout-effect"),{useEffect:Re,hasEffects:Fe,dropEffects:Ue}=xe(Le,de),We=Symbol("use-insertion-effect"),{useEffect:Be,hasEffects:je,dropEffects:Ge}=xe(We,pe);function Ke(e,t){let n=e,o=!0,r=!1,s=!1;const i={},l=e=>!i[e],a=()=>o=!1,c=()=>s=!0;for(;n&&(t({nextFiber:n,isReturn:r,resetIsDeepWalking:a,stop:c}),!s);)if(n.child&&o&&l(n.child.id)){const e=n.child;r=!1,n=e,i[e.id]=!0}else if(n.nextSibling&&l(n.nextSibling.id)){const e=n.nextSibling;o=!0,r=!1,n=e,i[e.id]=!0}else if(n.parent&&n.parent===e&&n.parent.nextSibling&&l(n.parent.nextSibling.id)){const e=n.parent.nextSibling;o=!0,r=!1,n=e,i[e.id]=!0}else n.parent&&n.parent!==e?(o=!1,r=!0,n=n.parent):n=null}function Ze(e){(e.insertionEffectHost||e.layoutEffectHost||e.effectHost||e.portalHost)&&Ke(e,(({nextFiber:t,isReturn:n,stop:o})=>{if(t===e.nextSibling)return o();!n&&M(t.instance)&&(t.insertionEffectHost&&Ge(t.hook),t.layoutEffectHost&&Ue(t.hook),t.effectHost&&Ce(t.hook),t.portalHost&&Pe.unmountPortal(t))}))}const qe={[Oe.CREATE]:!0};class Ve{id=0;nativeElement=null;parent=null;child=null;nextSibling=null;alternate=null;move=!1;effectTag=null;instance=null;hook=null;provider=null;effectHost=!1;layoutEffectHost=!1;insertionEffectHost=!1;portalHost=!1;childrenCount=0;childrenElementsCount=0;marker="";isUsed=!1;idx=0;elementIdx=0;batched=null;catchException;static nextId=0;constructor(e=null,t=null,n=0){this.id=++Ve.nextId,this.hook=e,this.provider=t,this.idx=n}mutate(e){const t=Object.keys(e);for(const n of t)this[n]=e[n];return this}markEffectHost(){this.effectHost=!0,this.parent&&!this.parent.effectHost&&this.parent.markEffectHost()}markLayoutEffectHost(){this.layoutEffectHost=!0,this.parent&&!this.parent.layoutEffectHost&&this.parent.markLayoutEffectHost()}markInsertionEffectHost(){this.insertionEffectHost=!0,this.parent&&!this.parent.insertionEffectHost&&this.parent.markInsertionEffectHost()}markPortalHost(){this.portalHost=!0,this.parent&&!this.parent.portalHost&&this.parent.markPortalHost()}incrementChildrenElementsCount(e=1,t=!1){!function(e,t=1,n=!1){if(!e.parent)return;const o=ge.get(),r=oe.get(),s=o&&r.parent===e.parent;(Z(e.instance)||R(e.instance)&&0===e.instance.children.length)&&(e.childrenElementsCount=1),o&&s&&!n||(e.parent.childrenElementsCount+=t,e.parent.nativeElement||e.parent.incrementChildrenElementsCount(t))}(this,e,t)}setError(e){a(this.catchException)?this.catchException(e):this.parent&&this.parent.setError(e)}}function _e(){const t=oe.get();let n=se.get(),o=!1,r=Boolean(n);const s={fiber$$:null,fiber$:null,instance$:null};for(;n&&!o;)n=ze(n,s),se.set(n),r=Boolean(n),o=Pe.shouldYeildToHost();return!n&&t&&function(){if(e&&be.set(!1),ve.get()&&ye())return dt(null);const t=oe.get(),n=Pe.detectIsDynamic(),o=ce.get(),r=ae.get(),s=ge.get();for(const e of o)Ze(e),Pe.applyCommit(e);n&&(me.set(!0),pe.get().forEach((e=>e())),me.set(!1)),s&&function(e){const t=e.childrenElementsCount-e.alternate.childrenElementsCount;if(0===t)return;const n=function(e){let t=e;for(;t&&(t=t.parent,!t||!t.nativeElement););return t}(e);let o=!1;e.incrementChildrenElementsCount(t,!0),Ke(n.child,(({nextFiber:r,resetIsDeepWalking:s,isReturn:i,stop:l})=>r===n?l():r===e?(o=!0,s()):(r.nativeElement&&s(),void(o&&!i&&(r.elementIdx+=t)))))}(t);for(const e of r)e.effectTag!==Oe.SKIP&&Pe.applyCommit(e),e.alternate=null;t.alternate=null,Pe.finishCommitWork(),n&&(he.set(!0),de.get().forEach((e=>e())),he.set(!1)),n&&function(){const e=fe.get();e.length>0&&setTimeout((()=>e.forEach((e=>e()))))}(),dt(t)}(),r}function ze(e,t){let n=!0,o=e,r=e.instance;for(;;){if(n=ue.deepWalking.get(),o.hook&&(o.hook.idx=0),n)if(ct(r)&&r.children.length>0){if(Xe(o,t),o=t.fiber$,r=t.instance$,t.fiber$$=null,t.fiber$=null,t.instance$=null,o)return o}else{Ye(o,t);const e=t.fiber$$;if(o=t.fiber$,r=t.instance$,t.fiber$$=null,t.fiber$=null,t.instance$=null,e)return e}else{Ye(o,t);const e=t.fiber$$;if(o=t.fiber$,r=t.instance$,t.fiber$$=null,t.fiber$=null,t.instance$=null,e)return e}if(null===o.parent)return null}}function Xe(e,t){ue.jumpToChild();let n=e.instance;const o=e.alternate?e.alternate.child:null,r=new Ve(ft(o,o?o.instance:null,ct(n)?n.children[0]:null),o?o.provider:null,0);ie.set(r),r.parent=e,e.child=r,r.elementIdx=e.nativeElement?0:e.elementIdx,n=ot(n,0,r),o&&tt(o,n),Je(r,o,n),o&&z(r.instance)&&nt(r),ae.add(r),t.fiber$$=null,t.fiber$=r,t.instance$=n}function Ye(e,t){ue.jumpToSibling();let n=e.parent.instance;const o=ue.getIndex();if(ct(n)&&n.children[o]){ue.deepWalking.set(!0);const r=e.alternate?e.alternate.nextSibling:null,s=new Ve(ft(r,r?r.instance:null,ct(n)?n.children[o]:null),r?r.provider:null,o);return ie.set(s),s.parent=e.parent,e.nextSibling=s,s.elementIdx=e.elementIdx+(e.nativeElement?1:e.childrenElementsCount),n=ot(n,o,s),r&&tt(r,n),Je(s,r,n),r&&z(s.instance)&&nt(s),ae.add(s),t.fiber$$=s,t.fiber$=s,void(t.instance$=n)}ue.jumpToParent(),ue.deepWalking.set(!1),n=(e=e.parent).instance,ct(e.instance)&&(e.instance.children=[]),t.fiber$$=null,t.fiber$=e,t.instance$=n}function Je(e,t,n){let o=!1;qe[e.parent.effectTag]&&(e.effectTag=e.parent.effectTag),e.effectTag!==Oe.CREATE&&(o=t&&ut(t.instance,n)&&(t?it(t.instance):null)===it(n)),e.instance=n,e.alternate=t||null,e.nativeElement=o?t.nativeElement:null,e.effectTag=o?Oe.UPDATE:Oe.CREATE,t&&t.move&&(e.move=t.move,t.move=!1),ct(e.instance)&&(e.childrenCount=e.instance.children.length),!e.nativeElement&&L(e.instance)&&(e.nativeElement=Pe.createNativeElement(e.instance),e.effectTag=Oe.CREATE),e.nativeElement&&e.incrementChildrenElementsCount()}function Qe(e,t,n){return 0===e||t.child&&t.child.effectTag===Oe.DELETE?(t.child=n,n.parent=t):(t.nextSibling=n,n.parent=t.parent),n}function et(e,t){return(new Ve).mutate({effectTag:Oe.CREATE,instance:K(),parent:e,marker:t+""})}function tt(t,n){const o=ut(t.instance,n),r=function(e){return M(e)?I(e):U(e)?G(e):R(e)?B(e):null}(n),s=r&&r[l.HAS_NO_MOVES];if(t.isUsed=!0,o){if(ct(t.instance)&&ct(n)&&0!==t.childrenCount&&(!s||t.childrenCount!==n.children.length)){const{prevKeys:o,nextKeys:r,prevKeysMap:s,nextKeysMap:i,keyedFibersMap:l}=function(t,n){let o=t,r=0;const s=[],i=[],l={},a={},c={},u={};for(;o||r<n.length;){if(o){const e=it(o.instance),t=g(e)?st(r):e;s.push(t),l[t]=!0,c[t]=o}if(n[r]){const t=n[r],o=it(t),s=g(o)?st(r):o;e&&(u[s]&&y(`[Dark]: The key of node [${s}] already has been used!`,[t]),u[s]=!0),i.push(s),a[s]=!0}o=o?o.nextSibling:null,r++}return{prevKeys:s,nextKeys:i,prevKeysMap:l,nextKeysMap:a,keyedFibersMap:c}}(t.child,n.children);let a=[],c=Math.max(o.length,r.length),u=t,f=0,d=0,p=0;for(let n=0;n<c;n++){const h=r[n-p]??null,m=o[n-d]??null,g=l[m]||null,E=l[h]||et(t,h);h!==m?null===h||s[h]?i[m]?i[m]&&i[h]&&(e&&a.push([[h,m],"move"]),E.effectTag=Oe.UPDATE,g.effectTag=Oe.UPDATE,E.move=!0,u=Qe(n,u,E)):(e&&a.push([m,"remove"]),g.effectTag=Oe.DELETE,ce.add(g),p++,f--,c++):(null===m||i[m]?(e&&a.push([h,"insert"]),E.effectTag=Oe.CREATE,d++,c++):(e&&a.push([[h,m],"replace"]),E.effectTag=Oe.CREATE,g.effectTag=Oe.DELETE,ce.add(g)),u=Qe(n,u,E)):null!==h&&(e&&a.push([h,"stable"]),E.effectTag=Oe.UPDATE,u=Qe(n,u,E)),E.idx=f,f++}a=[]}}else(function(e){let t=e.parent;for(;t;){if(t.effectTag===Oe.DELETE)return!1;t=t.parent}return!0})(t)&&(t.effectTag=Oe.DELETE,ce.add(t))}function nt(t){if(e&&be.get())return;const n=t.alternate,o=n.instance,r=t.instance;if(t.move||r.type!==o.type||r.shouldUpdate(o.props,r.props))return;ue.deepWalking.set(!1),t.effectTag=Oe.SKIP,t.alternate=n,t.nativeElement=n.nativeElement,t.child=n.child,t.hook=n.hook,t.provider=n.provider,t.childrenCount=n.childrenCount,t.childrenElementsCount=n.childrenElementsCount,t.catchException=n.catchException,t.child&&(t.child.parent=t);const s=t.elementIdx-n.elementIdx;0!==s&&Ke(t.child,(({nextFiber:e,stop:n})=>e===t.nextSibling||e===t.parent?n():(e.elementIdx+=s,e.parent!==t&&e.nativeElement?n():void 0))),t.incrementChildrenElementsCount(n.childrenElementsCount),n.effectHost&&t.markEffectHost(),n.layoutEffectHost&&t.markLayoutEffectHost(),n.insertionEffectHost&&t.markInsertionEffectHost(),n.portalHost&&t.markPortalHost()}function ot(e,t,n){let o=null;return ct(e)&&(h(e.children[t])&&e.children.splice(t,1,...k(e.children[t])),o=rt(n,e.children[t]),M(o)&&(we(n)&&n.markEffectHost(),Fe(n)&&n.markLayoutEffectHost(),je(n)&&n.markInsertionEffectHost(),Pe.detectIsPortal(o)&&n.markPortalHost())),o}function rt(e,t){let n=t;const o=M(n),r=n;if(o)try{let e=r.type(r.props,r.ref);h(e)&&!Se(r)?e=Me({slot:e}):(f(e)||u(e))&&(e=q(e)),r.children=h(e)?k(e):[e]}catch(t){r.children=[],e.setError(t),y(t)}else U(n)&&(n=n());if(ct(n)){n.children=o?n.children:h(n.children)?k(n.children):[n.children];for(let e=0;e<n.children.length;e++)n.children[e]||(n.children[e]=lt(n.children[e]));o&&0===r.children.length&&r.children.push(K())}return n}function st(e){return`${t}:${e}`}function it(e){return M(e)?S(e):U(e)?j(e):R(e)?W(e):null}function lt(e){return E(e)?K():e}function at(e){return U(e)?e[n]:R(e)?e.name:L(e)||M(e)?e.type:null}function ct(e){return R(e)||M(e)}function ut(t,n,o=!1){if(e&&be.get()&&M(t)&&M(n))return t.displayName===n.displayName;if(o){const e=n;return t.type===e.type}return at(t)===at(n)}function ft(e,t,n){return e&&function(e,t){return!!(e&&t&&M(e)&&M(t)&&ut(e,t,!0))&&it(e)===it(t)}(t,n)?e.hook:M(n)?{idx:0,values:[]}:null}function dt(e){oe.set(null),ae.reset(),ce.reset(),pe.reset(),de.reset(),fe.reset(),ge.get()?ge.set(!1):re.set(e)}const pt=()=>Boolean(oe.get());function ht(e){const t=te(),n=Ne((()=>({fiber:null})),[]);return n.fiber=ie.get(),o=>{if(me.get())return;const r=function(e){const{rootId:t,fiber:n,forceStart:o=!1,onStart:r}=e;return()=>{n.effectTag!==Oe.DELETE&&(o&&r(),n.isUsed||(!o&&r(),ee.set(t),ge.set(!0),ue.reset(),n.alternate=(new Ve).mutate(n),n.marker="🔥",n.effectTag=Oe.UPDATE,n.childrenElementsCount=0,n.child=null,oe.set(n),ie.set(n),n.instance=rt(n,n.instance),se.set(n)))}}({rootId:t,fiber:n.fiber,forceStart:Boolean(e?.timeoutMs),onStart:o||b});he.get()&&(e={...e||{},forceSync:!0}),Ee.get()?function(e,t){e.batched&&clearTimeout(e.batched),e.batched=setTimeout((()=>{Ee.set(!1),e.batched=null,t()}))}(n.fiber,(()=>Pe.scheduleCallback(r,e))):Pe.scheduleCallback(r,e)}}function mt(e){const{defaultValue:t}=e,n=ie.get(),o=Ne((()=>function(e,t){let n=t;for(;n;){if(n.provider&&n.provider.get(e))return n.provider.get(e);n=n.parent}return null}(e,n)),[]),r=o?o.value:t,s=ht(),i=Ne((()=>({value:r})),[]),l=Boolean(o);return Te((()=>{if(!l)return;const e=o.subscribe((e=>{Object.is(i.value,e)||s()}));return e}),[l]),i.value=r,r}function gt(e,t){return Ne((()=>e),t)}const Et=H((e=>{const{list:t,getKey:n,slot:o}=e,r=Ne((()=>({list:t,subscribers:new Set})),[]),s=Ne((()=>({value:T(t,(e=>n(e)),!0)})),[t,n]),i=Ne((()=>{if(r.list.length!==t.length)return!1;let e=0;for(const o of t){if(n(o)!==n(r.list[e]))return!1;e++}return!0}),[t]);Ne((()=>{r.list=[...t]}),[t]),Re((()=>{if(i)for(const e of r.subscribers)e(s.value)}),[t]);const l=gt((e=>(r.subscribers.add(e),()=>r.subscribers.delete(e))),[]),a=Ne((()=>({subscribe:l,map:s.value})),[]);return a.map=s.value,bt.Provider({value:a,slot:vt({canSplit:i,slot:o})})})),vt=X(H((({slot:e})=>e)),((e,t)=>!1===t.canSplit)),bt=function(e,t){const{displayName:n="Context"}={},o={displayName:n,defaultValue:null,Provider:null,Consumer:null};return o.Provider=function(e,t,n){return H((({value:t=null,slot:n})=>{const o=ie.get();if(!o.provider){const n={value:t,subscribers:new Set,subscribe:e=>(n.subscribers.add(e),()=>n.subscribers.delete(e))};o.provider=new Map,o.provider.set(e,n)}const r=o.provider.get(e);return Te((()=>{r.subscribers.forEach((e=>e(t)))}),[t]),r.value=t,n}),{displayName:`${n}.Provider`})}(o,0,n),o.Consumer=function(e,t){return H((({slot:t})=>{const n=mt(e);return a(t)?t(n):null}),{displayName:`${t}.Consumer`})}(o,n),o}(),yt=e=>t=>function(e){const t=()=>{const{as:t,slot:n,_void:o=!1,...r}=e,s=o?[]:h(n)?n:n?[n]:[];return new P(t,r,s)};return t[$]=!0,t[o]=e.key,t[s]=e.flag,t[n]=e.as,t}({as:e,...t||{}}),kt=(yt("html"),yt("body"),yt("base"),yt("head"),yt("link"),yt("meta"),yt("style"),yt("title"),yt("address"),yt("article"),yt("aside"),yt("footer"),yt("header"),yt("h1"),yt("h2"),yt("h3"),yt("h4"),yt("h5"),yt("h6"),yt("nav"),yt("section"),yt("div")),Tt=(yt("dd"),yt("dl"),yt("figcaption"),yt("figure"),yt("picture"),yt("hr"),yt("img"),yt("li"),yt("main"),yt("ol"),yt("p"),yt("pre"),yt("ul"),yt("a"),yt("b"),yt("abbr"),yt("bdi"),yt("bdo"),yt("br"),yt("cite"),yt("code"),yt("data"),yt("dfn"),yt("em"),yt("i"),yt("kbd"),yt("mark"),yt("q"),yt("rp"),yt("rt"),yt("ruby"),yt("s"),yt("samp"),yt("small"),yt("span"),yt("strong"),yt("sub"),yt("sup"),yt("time"),yt("u"),yt("var"),yt("wbr"),yt("area"),yt("audio"),yt("map"),yt("track"),yt("video"),yt("embed"),yt("object"),yt("param"),yt("source"),yt("canvas"),yt("script"),yt("noscript"),yt("del"),yt("ins"),yt("caption"),yt("col"),yt("colgroup"),yt("table")),wt=(yt("thead"),yt("tbody")),Ct=yt("td"),xt=(yt("th"),yt("tr")),Ht=yt("button");yt("datalist"),yt("fieldset"),yt("form"),yt("input"),yt("label"),yt("legend"),yt("meter"),yt("optgroup"),yt("option"),yt("output"),yt("progress"),yt("select"),yt("textarea"),yt("details"),yt("dialog"),yt("menu"),yt("summary"),yt("template"),yt("blockquote"),yt("iframe"),yt("tfoot"),yt("svg"),yt("animate"),yt("animateMotion"),yt("animateTransform"),yt("circle"),yt("clipPath"),yt("defs"),yt("desc"),yt("ellipse"),yt("feBlend"),yt("feColorMatrix"),yt("feComponentTransfer"),yt("feComposite"),yt("feConvolveMatrix"),yt("feDiffuseLighting"),yt("feDisplacementMap"),yt("feDistantLight"),yt("feDropShadow"),yt("feFlood"),yt("feFuncA"),yt("feFuncB"),yt("feFuncG"),yt("feFuncR"),yt("feGaussianBlur"),yt("feImage"),yt("feMerge"),yt("feMergeNode"),yt("feMorphology"),yt("feOffset"),yt("fePointLight"),yt("feSpecularLighting"),yt("feSpotLight"),yt("feTile"),yt("feTurbulence"),yt("filter"),yt("foreignObject"),yt("g"),yt("image"),yt("line"),yt("linearGradient"),yt("marker"),yt("mask"),yt("metadata"),yt("mpath"),yt("path"),yt("pattern"),yt("polygon"),yt("polyline"),yt("radialGradient"),yt("rect"),yt("stop"),yt("switch"),yt("symbol"),yt("text"),yt("textPath"),yt("tspan"),yt("use"),yt("view");const Mt=Symbol("portal");H((({slot:e,...t})=>(Ne((()=>t[Mt].innerHTML=""),[]),e)),{token:Mt});const St=e=>M(e)&&e.token===Mt,It=e=>St(e)?e.props[Mt]:null;function At(e){const t=It(e.instance);t&&(t.innerHTML="")}class $t{type="";sourceEvent=null;target=null;propagation=!0;constructor(e){this.type=e.sourceEvent.type,this.sourceEvent=e.sourceEvent,this.target=e.target}stopPropagation(){this.propagation=!1,this.sourceEvent.stopPropagation()}preventDefault(){this.sourceEvent.preventDefault()}getPropagation(){return this.propagation}}function Nt(e){const{target:t,eventName:n,handler:o}=e,r=le.get(),s=r.get(n);if(s)s.set(t,o);else{const e=e=>{const t=r.get(n).get(e.target),o=e.target;let s=null;a(t)&&(s=new $t({sourceEvent:e,target:o}),t(s)),(s?s.getPropagation():o.parentElement)&&o.parentElement.dispatchEvent(new e.constructor(e.type,e))};r.set(n,new WeakMap([[t,o]])),document.addEventListener(n,e,!0),le.addUnsubscriber((()=>document.removeEventListener(n,e,!0)))}}const Pt=e=>e.startsWith("on"),Dt=e=>e.slice(2,e.length).toLowerCase(),Ot={[o]:!0,[r]:!0,[s]:!0},Lt={transform:!0,fill:!0};let Rt=[];const Ft=T("svg,animate,animateMotion,animateTransform,circle,clipPath,defs,desc,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,image,line,linearGradient,marker,mask,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,stop,switch,symbol,text,textPath,tspan,use,view".split(","),(e=>e)),Ut=T("area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr".split(","),(e=>e)),Wt={[A.TAG]:e=>{const t=e;return n=t.name,Boolean(Ft[n])?document.createElementNS("http://www.w3.org/2000/svg",t.name):document.createElement(t.name);var n},[A.TEXT]:e=>document.createTextNode(e.value),[A.COMMENT]:e=>document.createComment(e.value)};function Bt(e){return Wt[e.type](e)}function jt(e,t){!function(e,t){a(e)?e(t):function(e){if(!d(e)||m(e))return!1;const t=e;for(const e in t)if("current"===e&&t.hasOwnProperty(e))return!0;return!1}(e)&&(e.current=t)}(e,t)}function Gt(e){const{tagName:t,element:n,attrName:o,attrValue:r}=e,s=Kt[t];let i=!!s&&s(n,o,r);var l,a;return a=o,(l=Object.getPrototypeOf(n)).hasOwnProperty(a)&&Boolean(Object.getOwnPropertyDescriptor(l,a)?.set)&&(n[o]=r),!i&&p(r)&&(i=!o.includes("-")),i}const Kt={input:(e,t,n)=>("value"===t&&p(n)?e.checked=n:"autoFocus"===t&&(e.autofocus=Boolean(n)),!1),textarea:(e,t,n)=>"value"===t&&(e.innerHTML=String(n),!0)};function Zt(e){let t=e;for(;t;)if(t=t.parent,St(t.instance)&&(t.nativeElement=It(t.instance)),t.nativeElement)return t;return t}const qt={[Oe.CREATE]:e=>{null!==e.nativeElement&&function(e){const t=Zt(e),n=t.nativeElement,o=n.childNodes;if(ve.get()){const t=o[e.elementIdx];F(e.instance)&&t instanceof Text&&e.instance.value.length!==t.length&&t.splitText(e.instance.value.length),e.nativeElement=t}else 0===o.length||e.elementIdx>o.length-1?(s=t.instance.name,!Boolean(Ut[s])&&function(e,t){t.appendChild(e.nativeElement)}(e,n)):function(e,t){t.insertBefore(e.nativeElement,t.childNodes[e.elementIdx])}(e,n);var s;R(e.instance)&&function(e,t){const n=Object.keys(t.attrs),o=e;for(const s of n){const n=t.attrs[s];s!==r?a(n)?Pt(s)&&Nt({target:o,handler:n,eventName:Dt(s)}):c(n)||Ot[s]||!Gt({tagName:t.name,element:o,attrValue:n,attrName:s})&&o.setAttribute(s,n):jt(n,e)}}(e.nativeElement,e.instance)}(e)},[Oe.UPDATE]:e=>{e.move&&(function(e){const t=function(e){const t=[];return Ke(e,(({nextFiber:n,isReturn:o,resetIsDeepWalking:r,stop:s})=>n===e.nextSibling||n===e.parent?s():!o&&n.nativeElement?(!St(n.instance)&&t.push(n.nativeElement),r()):void 0)),t}(e),n=t[0].parentElement,o=new DocumentFragment,r=e.elementIdx;let s=0;for(const e of t)n.insertBefore(document.createComment(`${r}:${s}`),e),o.appendChild(e),s++;Rt.push((()=>{for(let e=1;e<t.length;e++)n.removeChild(n.childNodes[r+1]);n.replaceChild(o,n.childNodes[r])}))}(e),e.move=!1),null===e.nativeElement||M(e.instance)||function(e){const t=e.nativeElement,n=e.alternate.instance,o=e.instance;Z(n)&&Z(o)?n.value!==o.value&&(t.textContent=o.value):function(e,t,n){const o=Object.keys(n.attrs),s=e;for(const i of o){const o=t.attrs[i],l=n.attrs[i];i!==r?c(l)?s.removeAttribute(i):a(o)?Pt(i)&&o!==l&&Nt({target:s,handler:l,eventName:Dt(i)}):Ot[i]||o===l||(Lt[i]||!Gt({tagName:n.name,element:s,attrValue:l,attrName:i}))&&s.setAttribute(i,l):jt(o,e)}}(t,n,o)}(e)},[Oe.DELETE]:e=>function(e){const t=Zt(e);Ke(e,(({nextFiber:n,isReturn:o,resetIsDeepWalking:r,stop:s})=>n===e.nextSibling||n===e.parent?s():!o&&n.nativeElement?(!St(n.instance)&&t.nativeElement.removeChild(n.nativeElement),r()):void 0))}(e),[Oe.SKIP]:()=>{}};function Vt(e){qt[e.effectTag](e)}function _t(){for(const e of Rt)e();Rt=[],ve.set(!1)}const zt={animations:[],hight:[],normal:[],low1:[],low2:[]},Xt=1e5;let Yt=null,Jt=0,Qt=!1,en=null;class tn{static nextTaskId=0;id;time;timeoutMs;priority;forceSync;callback;constructor(e){this.id=++tn.nextTaskId,this.time=e.time,this.timeoutMs=e.timeoutMs,this.priority=e.priority,this.forceSync=e.forceSync,this.callback=e.callback}}const nn=()=>v()>=Jt;function on(e,t){const{priority:n=i.NORMAL,timeoutMs:o=0,forceSync:r=!1}=t||{},s=new tn({time:v(),timeoutMs:o,priority:n,forceSync:r,callback:e});({[i.ANIMATION]:()=>zt.animations.push(s),[i.HIGH]:()=>zt.hight.push(s),[i.NORMAL]:()=>zt.normal.push(s),[i.LOW]:()=>s.timeoutMs>0?zt.low2.push(s):zt.low1.push(s)})[s.priority](),sn()}function rn(e){if(!e.length)return!1;en=e.shift();const t=en.priority===i.ANIMATION;return en.callback(),en.forceSync||t?function(e){for(;e(););sn(),en=null}(_e):(Yt=_e,Qt||(Qt=!0,an.postMessage(null))),!0}function sn(){pt()||function(){const[e]=zt.low2;return!!(e&&v()-e.time>e.timeoutMs)&&(rn(zt.low2),!0)}()||(zt.low1.length>Xt&&(zt.low1=[]),0)||zt.animations.length>0&&rn(zt.animations)||zt.hight.length>0&&rn(zt.hight)||zt.normal.length>0&&rn(zt.normal)||zt.low1.length>0&&requestIdleCallback((()=>rn(zt.low1)))||zt.low2.length>0&&requestIdleCallback((()=>rn(zt.low2)))}let ln=null,an=null;ln=new MessageChannel,an=ln.port2,ln.port1.onmessage=function(){if(Yt){Jt=v()+4;try{Yt()?an.postMessage(null):(en=null,Qt=!1,Yt=null,sn())}catch(e){throw an.postMessage(null),e}}else Qt=!1};let cn=!1;const un=new Map;const fn={[l.HAS_NO_MOVES]:!0},dn=(()=>{let e,t;return{start:n=>{e=performance.now(),t=n},stop:()=>{const n=t;t&&setTimeout((()=>{t=null;const o=performance.now()-e;console.log(`${n}: ${o}`)}))}}})();let pn=0;const hn=(e,t="")=>Array(e).fill(0).map((()=>({id:++pn,name:`item: ${pn} ${t}`,selected:!1}))),mn={list:[]},gn=X(H((({onCreate:e,onPrepend:t,onAppend:n,onInsertDifferent:o,onUpdateAll:r,onSwap:s,onClear:i})=>kt({style:"width: 100%; height: 64px; background-color: blueviolet; display: flex; align-items: center; padding: 16px;",slot:[Ht({slot:q("create 10000 rows"),onClick:e}),Ht({slot:q("Prepend 1000 rows"),onClick:t}),Ht({slot:q("Append 1000 rows"),onClick:n}),Ht({slot:q("insert different"),onClick:o}),Ht({slot:q("update every 10th row"),onClick:r}),Ht({slot:q("swap rows"),onClick:s}),Ht({slot:q("clear rows"),onClick:i}),Ht({slot:q("unmount app"),onClick:()=>{wn.unmount()}})]}))),(()=>!1)),En=X(H((({slot:e})=>e)),(()=>!1)),vn=X(H((({id:e,onRemove:t,onHighlight:n})=>{const{name:o,selected:r}=function(e,t){const{subscribe:n,map:o}=mt(bt),r=ht({forceSync:!0}),s=e(o),i=t(s),l=Ne((()=>({detectedChange:i})),[]);return Te((()=>{const o=n((n=>{const o=t(e(n));Object.is(l.detectedChange,o)||r(),l.detectedChange=o}));return o}),[]),l.detectedChange=i,s}((t=>t[e]),(e=>`${e.name}:${e.selected}`));return xt({class:r?"selected":void 0,flag:fn,slot:[Ct({class:"cell",slot:q(o)}),En({slot:[Ct({class:"cell",slot:q("qqq")}),Ct({class:"cell",slot:q("xxx")}),Ct({class:"cell",slot:[Ht({onClick:()=>t(e),slot:q("remove")}),Ht({onClick:()=>n(e),slot:q("highlight")})]})]})]})})),(()=>!1));function bn(e,t){const n=[];for(const o of e)n.push(t(o));return n}const yn=X(H((({items:e,onRemove:t,onHighlight:n})=>{const o=gt((e=>vn({key:e.id,id:e.id,onRemove:t,onHighlight:n})),[]);return Tt({class:"table",slot:wt({slot:bn(e,o)})})}))),kn=H((()=>{const e=ht({forceSync:!0}),t=gt((()=>{mn.list=hn(1e4),dn.start("create"),e(),dn.stop()}),[]),n=gt((()=>{mn.list.unshift(...hn(1e3,"!!!")),mn.list=[...mn.list],dn.start("prepend"),e(),dn.stop()}),[]),o=gt((()=>{mn.list.push(...hn(1e3,"!!!")),mn.list=[...mn.list],dn.start("append"),e(),dn.stop()}),[]),r=gt((()=>{const[t,n,o,...r]=mn.list;mn.list=[...hn(5,"***"),t,n,o,...hn(2,"***"),...r].filter(Boolean),dn.start("insert different"),e(),dn.stop()}),[]),s=gt((()=>{mn.list=mn.list.map(((e,t)=>({...e,name:(t+1)%10==0?e.name+"!!!":e.name}))),dn.start("update every 10th"),e(),dn.stop()}),[]),i=gt((t=>{mn.list=mn.list.filter((e=>e.id!==t)),dn.start("remove"),e(),dn.stop()}),[]),l=gt((t=>{const n=mn.list.findIndex((e=>e.id===t));mn.list[n].selected=!mn.list[n].selected,mn.list=[...mn.list],dn.start("highlight"),e(),dn.stop()}),[]),a=gt((()=>{if(0===mn.list.length)return;const t=mn.list[1];mn.list[1]=mn.list[mn.list.length-2],mn.list[mn.list.length-2]=t,mn.list=[...mn.list],dn.start("swap"),e(),dn.stop()}),[]),c=gt((()=>{mn.list=[],dn.start("clear"),e(),dn.stop()}),[]);return[gn({onCreate:t,onPrepend:n,onAppend:o,onInsertDifferent:r,onUpdateAll:s,onSwap:a,onClear:c}),Et({list:mn.list,getKey:Tn,slot:yn({items:mn.list,onRemove:i,onHighlight:l})})]})),Tn=e=>e.id,wn=(Cn=document.getElementById("root"),{render:e=>function(e,t,n=!1){if(!cn&&function(){Pe.createNativeElement=Bt,Pe.requestAnimationFrame=requestAnimationFrame.bind(this),Pe.cancelAnimationFrame=cancelAnimationFrame.bind(this),Pe.scheduleCallback=on,Pe.shouldYeildToHost=nn,Pe.applyCommit=Vt,Pe.finishCommitWork=_t,Pe.detectIsDynamic=()=>!0,Pe.detectIsPortal=St,Pe.unmountPortal=At,Pe.restart=()=>{},cn=!0}(),!(t instanceof Element))throw new Error("[Dark]: render receives only Element as container!");const o=!c(un.get(t));let r=null;o?r=un.get(t):(r=un.size,un.set(t,r),n||(t.innerHTML="")),me.get(r)||Pe.scheduleCallback((()=>{ee.set(r);const o=re.get(),s=Boolean(o),i=(new Ve).mutate({nativeElement:t,instance:new P("root",{},k([e||K()])),alternate:o,effectTag:s?Oe.UPDATE:Oe.CREATE});ue.reset(),oe.set(i),ve.set(n),se.set(i)}),{priority:i.NORMAL,forceSync:n||he.get()})}(e,Cn),unmount:()=>function(e){!function(t,n){c(t)||(Ze(re.get(t)),le.unsubscribe(t),ee.remove(t),un.delete(e),e.innerHTML="")}(un.get(e))}(Cn)});var Cn;wn.render(kn())})();
//# sourceMappingURL=build.js.map